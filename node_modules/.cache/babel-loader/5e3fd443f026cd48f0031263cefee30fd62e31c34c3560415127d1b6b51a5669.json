{"ast":null,"code":"// Generated by CoffeeScript 1.6.2\n(function () {\n  var GroupFactory,\n    factoryFactory,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function (child, parent) {\n      for (var key in parent) {\n        if (__hasProp.call(parent, key)) child[key] = parent[key];\n      }\n      function ctor() {\n        this.constructor = child;\n      }\n      ctor.prototype = parent.prototype;\n      child.prototype = new ctor();\n      child.__super__ = parent.prototype;\n      return child;\n    };\n  factoryFactory = require(\"./factory\");\n  GroupFactory = function (_super) {\n    __extends(GroupFactory, _super);\n\n    /*\n    */\n\n    function GroupFactory(mandatory, optional, groupClass) {\n      if (mandatory == null) {\n        mandatory = [];\n      }\n      if (optional == null) {\n        optional = [];\n      }\n      this.groupClass = groupClass;\n      this.mandatory = mandatory.map(factoryFactory.create);\n      this.optional = optional.map(factoryFactory.create);\n    }\n\n    /*\n    */\n\n    GroupFactory.prototype.test = function (data) {\n      return !!this._getFactories(data, this.mandatory).length;\n    };\n\n    /*\n    */\n\n    GroupFactory.prototype.create = function (data) {\n      var factory, items, _i, _j, _len, _len1, _ref, _ref1;\n      items = [];\n      _ref = this._getFactories(data, this.mandatory);\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        factory = _ref[_i];\n        items.push(factory.create(data));\n      }\n      _ref1 = this._getFactories(data, this.optional);\n      for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {\n        factory = _ref1[_j];\n        items.push(factory.create(data));\n      }\n      if (items.length === 1) {\n        return items[0];\n      }\n      return new this.groupClass(data, items);\n    };\n\n    /*\n    */\n\n    GroupFactory.prototype._getFactories = function (data, collection) {\n      var factories, factory, _i, _len;\n      factories = [];\n      for (_i = 0, _len = collection.length; _i < _len; _i++) {\n        factory = collection[_i];\n        if (factory.test(data)) {\n          factories.push(factory);\n        }\n      }\n      return factories;\n    };\n    return GroupFactory;\n  }(require(\"./base\"));\n  module.exports = function (mandatory, optional, groupClass) {\n    return new GroupFactory(mandatory, optional, groupClass);\n  };\n}).call(this);","map":{"version":3,"names":["GroupFactory","factoryFactory","__hasProp","hasOwnProperty","__extends","child","parent","key","call","ctor","constructor","prototype","__super__","require","_super","mandatory","optional","groupClass","map","create","test","data","_getFactories","length","factory","items","_i","_j","_len","_len1","_ref","_ref1","push","collection","factories","module","exports"],"sources":["/Users/user/node_modules/factories/lib/group.js"],"sourcesContent":["// Generated by CoffeeScript 1.6.2\n(function() {\n  var GroupFactory, factoryFactory,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  factoryFactory = require(\"./factory\");\n\n  GroupFactory = (function(_super) {\n    __extends(GroupFactory, _super);\n\n    /*\n    */\n\n\n    function GroupFactory(mandatory, optional, groupClass) {\n      if (mandatory == null) {\n        mandatory = [];\n      }\n      if (optional == null) {\n        optional = [];\n      }\n      this.groupClass = groupClass;\n      this.mandatory = mandatory.map(factoryFactory.create);\n      this.optional = optional.map(factoryFactory.create);\n    }\n\n    /*\n    */\n\n\n    GroupFactory.prototype.test = function(data) {\n      return !!this._getFactories(data, this.mandatory).length;\n    };\n\n    /*\n    */\n\n\n    GroupFactory.prototype.create = function(data) {\n      var factory, items, _i, _j, _len, _len1, _ref, _ref1;\n\n      items = [];\n      _ref = this._getFactories(data, this.mandatory);\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        factory = _ref[_i];\n        items.push(factory.create(data));\n      }\n      _ref1 = this._getFactories(data, this.optional);\n      for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {\n        factory = _ref1[_j];\n        items.push(factory.create(data));\n      }\n      if (items.length === 1) {\n        return items[0];\n      }\n      return new this.groupClass(data, items);\n    };\n\n    /*\n    */\n\n\n    GroupFactory.prototype._getFactories = function(data, collection) {\n      var factories, factory, _i, _len;\n\n      factories = [];\n      for (_i = 0, _len = collection.length; _i < _len; _i++) {\n        factory = collection[_i];\n        if (factory.test(data)) {\n          factories.push(factory);\n        }\n      }\n      return factories;\n    };\n\n    return GroupFactory;\n\n  })(require(\"./base\"));\n\n  module.exports = function(mandatory, optional, groupClass) {\n    return new GroupFactory(mandatory, optional, groupClass);\n  };\n\n}).call(this);\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}