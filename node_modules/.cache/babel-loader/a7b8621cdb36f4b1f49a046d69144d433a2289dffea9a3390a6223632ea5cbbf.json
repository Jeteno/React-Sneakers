{"ast":null,"code":"import _objectSpread from\"/Users/user/Documents/frontend/react-sneakers/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _toConsumableArray from\"/Users/user/Documents/frontend/react-sneakers/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _regeneratorRuntime from\"/Users/user/Documents/frontend/react-sneakers/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/user/Documents/frontend/react-sneakers/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/user/Documents/frontend/react-sneakers/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import Header from'./components/Header';import Drawer from'./components/Drawer/Index';import AppContext from'./context';import{Route,Routes}from'react-router-dom';import React from'react';import axios from'axios';import Home from'./pages/Home.jsx';import Liked from'./pages/Liked.jsx';import Orders from'./pages/Orders';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),cartOpened=_React$useState2[0],setCartOpened=_React$useState2[1];var _React$useState3=React.useState([]),_React$useState4=_slicedToArray(_React$useState3,2),items=_React$useState4[0],setItems=_React$useState4[1];var _React$useState5=React.useState([]),_React$useState6=_slicedToArray(_React$useState5,2),cartItems=_React$useState6[0],setCartItems=_React$useState6[1];var _React$useState7=React.useState(''),_React$useState8=_slicedToArray(_React$useState7,2),searchValue=_React$useState8[0],setSearchValue=_React$useState8[1];var _React$useState9=React.useState([]),_React$useState10=_slicedToArray(_React$useState9,2),isLiked=_React$useState10[0],setLiked=_React$useState10[1];var _React$useState11=React.useState(true),_React$useState12=_slicedToArray(_React$useState11,2),isLoading=_React$useState12[0],setIsLoading=_React$useState12[1];React.useEffect(function(){function fetchData(){return _fetchData.apply(this,arguments);}function _fetchData(){_fetchData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$Promise$all,_yield$Promise$all2,cartResponse,likedResponse,itemsResponse;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return Promise.all([axios.get('https://6387382ad9b24b1be3e9cb49.mockapi.io/cart'),axios.get('https://6387382ad9b24b1be3e9cb49.mockapi.io/liked'),axios.get('https://6387382ad9b24b1be3e9cb49.mockapi.io/items')]);case 3:_yield$Promise$all=_context.sent;_yield$Promise$all2=_slicedToArray(_yield$Promise$all,3);cartResponse=_yield$Promise$all2[0];likedResponse=_yield$Promise$all2[1];itemsResponse=_yield$Promise$all2[2];setIsLoading(false);setCartItems(cartResponse.data);setLiked(likedResponse.data);setItems(itemsResponse.data);_context.next=17;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](0);alert('Ошибка при запросе данных');case 17:case\"end\":return _context.stop();}}},_callee,null,[[0,14]]);}));return _fetchData.apply(this,arguments);}fetchData();},[]);var onAddToCart=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(obj){var findItem,_yield$axios$post,data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;findItem=cartItems.find(function(item){return Number(item.parentId)===Number(obj.id);});if(!findItem){_context2.next=8;break;}setCartItems(function(prev){return prev.filter(function(item){return Number(item.parentId)!==Number(obj.id);});});_context2.next=6;return axios.delete(\"https://6387382ad9b24b1be3e9cb49.mockapi.io/cart/\".concat(findItem.id));case 6:_context2.next=14;break;case 8:setCartItems(function(prev){return[].concat(_toConsumableArray(prev),[obj]);});_context2.next=11;return axios.post(\"https://6387382ad9b24b1be3e9cb49.mockapi.io/cart\",obj);case 11:_yield$axios$post=_context2.sent;data=_yield$axios$post.data;setCartItems(function(prev){return prev.map(function(item){if(item.parentId===data.parentId){return _objectSpread(_objectSpread({},item),{},{id:data.id});}return item;});});case 14:_context2.next=19;break;case 16:_context2.prev=16;_context2.t0=_context2[\"catch\"](0);alert('Ошибка при добавлении в корзину');case 19:case\"end\":return _context2.stop();}}},_callee2,null,[[0,16]]);}));return function onAddToCart(_x){return _ref.apply(this,arguments);};}();var onRemoveItem=function onRemoveItem(id){try{axios.delete(\"https://6387382ad9b24b1be3e9cb49.mockapi.io/cart/\".concat(id));setCartItems(function(prev){return prev.filter(function(item){return Number(item.id)!==Number(id);});});}catch(error){alert('Ошибка при удалении из корзины');}};var onAddToLiked=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(obj){var _yield$axios$post2,data;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;if(!isLiked.find(function(likObj){return likObj.id===obj.id;})){_context3.next=6;break;}axios.delete(\"https://6387382ad9b24b1be3e9cb49.mockapi.io/liked/\".concat(obj.id));setLiked(function(prev){return prev.filter(function(item){return item.id!==obj.id;});});_context3.next=11;break;case 6:_context3.next=8;return axios.post(\"https://6387382ad9b24b1be3e9cb49.mockapi.io/liked\",obj);case 8:_yield$axios$post2=_context3.sent;data=_yield$axios$post2.data;setLiked(function(prev){return[].concat(_toConsumableArray(prev),[data]);});case 11:_context3.next=16;break;case 13:_context3.prev=13;_context3.t0=_context3[\"catch\"](0);alert('Не удалось добавить в избранные');case 16:case\"end\":return _context3.stop();}}},_callee3,null,[[0,13]]);}));return function onAddToLiked(_x2){return _ref2.apply(this,arguments);};}();var onChangeSearchInput=function onChangeSearchInput(event){setSearchValue(event.target.value);};var isItemAdded=function isItemAdded(id){return cartItems.some(function(obj){return Number(obj.parentId)===Number(id);});};return/*#__PURE__*/_jsx(AppContext.Provider,{value:{items:items,cartItems:cartItems,isLiked:isLiked,isItemAdded:isItemAdded,setCartOpened:setCartOpened,setCartItems:setCartItems,onAddToCart:onAddToCart},children:/*#__PURE__*/_jsxs(\"div\",{className:\"wrapper clear\",children:[/*#__PURE__*/_jsx(Drawer,{items:cartItems,onCloseCart:function onCloseCart(){return setCartOpened(false);},onRemove:onRemoveItem,opened:cartOpened}),/*#__PURE__*/_jsx(Header,{onClickCart:function onClickCart(){return setCartOpened(true);}}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Home,{items:items,cartItems:cartItems,searchValue:searchValue,setSearchValue:setSearchValue,onChangeSearchInput:onChangeSearchInput,onAddToLiked:onAddToLiked,onAddToCart:onAddToCart,isLoading:isLoading})}),/*#__PURE__*/_jsx(Route,{path:\"/liked\",element:/*#__PURE__*/_jsx(Liked,{onAddToLiked:onAddToLiked,onAddToCart:onAddToCart})}),/*#__PURE__*/_jsx(Route,{path:\"/orders\",element:/*#__PURE__*/_jsx(Orders,{onAddToLiked:onAddToLiked,onAddToCart:onAddToCart})})]})]})});}export default App;","map":{"version":3,"names":["Header","Drawer","AppContext","Route","Routes","React","axios","Home","Liked","Orders","App","useState","cartOpened","setCartOpened","items","setItems","cartItems","setCartItems","searchValue","setSearchValue","isLiked","setLiked","isLoading","setIsLoading","useEffect","fetchData","Promise","all","get","cartResponse","likedResponse","itemsResponse","data","alert","onAddToCart","obj","findItem","find","item","Number","parentId","id","prev","filter","delete","post","map","onRemoveItem","error","onAddToLiked","likObj","onChangeSearchInput","event","target","value","isItemAdded","some"],"sources":["/Users/user/Documents/frontend/react-sneakers/src/App.js"],"sourcesContent":["import Header from './components/Header';\nimport Drawer from './components/Drawer/Index';\nimport AppContext from './context';\n\nimport {Route, Routes} from 'react-router-dom';\nimport React from 'react';\nimport axios from 'axios';\n\nimport Home from './pages/Home.jsx'\nimport Liked from './pages/Liked.jsx';\nimport Orders from './pages/Orders';\n\nfunction App() {\n  const [cartOpened, setCartOpened] = React.useState(false);\n  const [items, setItems] = React.useState([]);\n  const [cartItems, setCartItems] = React.useState([]);\n  const [searchValue, setSearchValue] = React.useState('');\n  const [isLiked, setLiked] = React.useState([]);\n  const [isLoading, setIsLoading] = React.useState(true);\n\n  React.useEffect(() => {\n    async function fetchData() {\n      try {\n        const [cartResponse, likedResponse, itemsResponse] = await Promise.all([\n          axios.get('https://6387382ad9b24b1be3e9cb49.mockapi.io/cart'), \n          axios.get('https://6387382ad9b24b1be3e9cb49.mockapi.io/liked'), \n          axios.get('https://6387382ad9b24b1be3e9cb49.mockapi.io/items')])\n        \n        setIsLoading(false);\n  \n        setCartItems(cartResponse.data);\n        setLiked(likedResponse.data);\n        setItems(itemsResponse.data);\n  \n      } catch (error) {\n        alert('Ошибка при запросе данных');\n      }\n      }\n\n      fetchData();\n  }, []);\n\n  const onAddToCart = async (obj) => {\n    try {\n      const findItem = cartItems.find((item) => Number(item.parentId) === Number(obj.id));\n      if (findItem){\n        setCartItems((prev) => prev.filter((item) => Number(item.parentId) !== Number(obj.id)))\n        await axios.delete(`https://6387382ad9b24b1be3e9cb49.mockapi.io/cart/${findItem.id}`);\n      } else {\n        setCartItems((prev) => [...prev, obj]);    \n        const {data} = await axios.post(`https://6387382ad9b24b1be3e9cb49.mockapi.io/cart`, obj);\n        setCartItems((prev) => prev.map(item => {\n          if(item.parentId === data.parentId) {\n            return {\n              ...item,\n              id: data.id\n            }\n          }\n          return item;\n        }));    \n      }\n    }catch (error) {\n      alert('Ошибка при добавлении в корзину')\n    }\n  };\n\n  const onRemoveItem = (id) => {\n    try {\n      axios.delete(`https://6387382ad9b24b1be3e9cb49.mockapi.io/cart/${id}`);\n      setCartItems((prev) => prev.filter((item) => Number(item.id) !== Number(id)));  \n    } catch (error) {\n      alert('Ошибка при удалении из корзины')\n    }\n  };\n\n  const onAddToLiked = async(obj) => {\n    try {\n      if (isLiked.find(likObj => likObj.id === obj.id)){\n        axios.delete(`https://6387382ad9b24b1be3e9cb49.mockapi.io/liked/${obj.id}`);\n        setLiked((prev) => prev.filter((item) => item.id !== obj.id));\n      } else {\n          const {data} = await axios.post(`https://6387382ad9b24b1be3e9cb49.mockapi.io/liked`, obj);\n          setLiked((prev) => [...prev, data]);  \n      }\n    } catch (error) {\n      alert ('Не удалось добавить в избранные');\n    }\n  };\n \n  const onChangeSearchInput = (event) => {\n    setSearchValue(event.target.value);\n  };\n\n  const isItemAdded = (id) => {\n    return cartItems.some((obj) => Number(obj.parentId) === Number(id));\n  }\n\n  return (\n    <AppContext.Provider value={{items, cartItems, isLiked, isItemAdded, setCartOpened, setCartItems, onAddToCart}}>\n      <div className=\"wrapper clear\">\n          <Drawer \n            items={cartItems} \n            onCloseCart={() => setCartOpened(false)} \n            onRemove={onRemoveItem}\n            opened={cartOpened}\n          />\n        <Header onClickCart={() => setCartOpened(true)}/>\n        <Routes>\n          <Route path=\"/\" element={<Home \n              items={items} \n              cartItems={cartItems}\n              searchValue={searchValue} \n              setSearchValue={setSearchValue} \n              onChangeSearchInput={onChangeSearchInput} \n              onAddToLiked={onAddToLiked}\n              onAddToCart={onAddToCart}\n              isLoading={isLoading}\n            />}>\n          </Route>\n          <Route path=\"/liked\" element={<Liked \n            onAddToLiked={onAddToLiked}\n            onAddToCart={onAddToCart}\n          />}> \n          </Route>\n          <Route path=\"/orders\" element={<Orders \n            onAddToLiked={onAddToLiked}\n            onAddToCart={onAddToCart}\n          />}> \n          </Route>\n        </Routes>\n      </div>\n    </AppContext.Provider>\n  );\n}\n\nexport default App;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}